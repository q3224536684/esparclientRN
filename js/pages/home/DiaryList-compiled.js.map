{"version":3,"sources":["DiaryList.js"],"names":[],"mappings":"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","file":"DiaryList-compiled.js","sourcesContent":["import React,{Component} from 'react'\nimport {Text,\n    View,\n    FlatList,\n    Image,\n    TouchableOpacity,\n    Button,\n    SafeAreaView,\n    StyleSheet,\n} from 'react-native'\nimport {base_url, image_ip} from \"../../utils/Config\";\nimport {screenWidth,screenHeight} from \"../../utils/Utils\";\nimport RefreshFlatList from \"../../utils/RefreshFlatList\";\nimport FlatListExample from \"../../utils/FlatListExample\";\nimport Com from \"../../utils/Com\";\nimport RefreshableFlatList from 'react-native-refreshable-flatlist';\n\nlet index=0\nlet number=10\nlet list\n\n\nexport default class DiaryList extends Component{\n\n\tstatic navigationOptions=({navigation,screenProps})=>({\n\t\theaderTitle:'日记'\n\t})\n\n\n    constructor(props){\n        super(props)\n        this.state={\n            data:[],\n            isLoading:false,\n            isRefreshing:false,\n            showFoot:0,\n        }\n    }\n    requestData(){\n        var url=base_url+'/queryDiary.do?index='+index+'&size='+number\n        fetch(url,{\n            method:'GET'\n        }).then((response)=>response.json())\n            .then((responseJson)=>{\n                if (Boolean(responseJson.success)){\n                    list = responseJson.data\n\t                if (index==0){\n                        this.setState({\n                            data:list,\n                            showFoot:0,\n                        })\n                    } else {\n                        this.setState({\n                            data:this.state.data.concat(list),\n                        })\n                    }\n                    this.setState({\n                        isRefreshing:false,\n                        isLoading:false,\n                    })\n                    if (list.length<number){\n                         this.setState({\n                             showFoot:3,\n                         })\n                    }\n                    list=null\n                }\n            }).catch((error)=>alert('接口:'+url+'错误'+error.description))\n            .done();\n\n    }\n    componentDidMount(){\n        this.requestData()\n    }\n    _renderItem=(item)=>{\n        return(\n            <View style={styles.item}>\n                <View style={styles.itemTopView}>\n                    <Image source={{uri:image_ip+item.item.HeadPortrait}} defaultSource={require('../../../images/默认头像.png')} style={styles.itemTopViewImage} />\n                    <Text>{item.item.EmployeeName}</Text>\n                </View>\n                <View style={{alignItems:'center'}}>\n                    <Image style={styles.itemImage} source={{uri:image_ip+item.item.imageUrl}}/>\n                </View>\n                <View style={{height:40,alignItems:'center',justifyContent:'center'}}>\n                    <Text>{item.item.Title}</Text>\n                </View>\n            </View>\n        )\n    }\n    _onRefresh=()=>{\n        this.setState({\n            isRefreshing:true,\n            showFoot:1,\n        })\n        index=0;\n        this.requestData();\n\n    }\n\t_onEndReached(){\n\t\tthis.setState({\n\t\t\tisLoading:true,\n\t\t\tshowFoot:2,\n\t\t})\n\t\tindex++;\n\t\tthis.requestData();\n\t\tconsole.log('');\n\t}\n\n    render() {\n\t    return (\n\t\t    <SafeAreaView style={styles.container}>\n\t\t\t    <RefreshFlatList\n\t\t\t\t    data={this.state.data}\n\t\t\t\t    renderItem={this._renderItem}\n\t\t\t\t    refreshState={this.state.showFoot}\n\t\t\t\t    onEndReached={this._onEndReached.bind(this)}\n\t\t\t    />\n\n\t\t    </SafeAreaView>\n\t    )\n    }\n}\nconst styles=StyleSheet.create({\n    container:{\n        flex:1,\n\t    height:screenHeight(),\n\t    backgroundColor: 'white',\n    },\n    item:{\n        flex:1,\n        marginLeft:10,\n        marginRight:10,\n        marginTop:5,\n        marginBottom:5,\n        borderRadius:5,\n        overflow:'hidden',\n        backgroundColor:'white'\n    },\n    itemTopView:{\n        flexDirection:'row',\n        alignItems:'center',\n        marginBottom:10,\n        marginTop:10,\n        marginLeft:10,\n    },\n    itemTopViewImage:{\n        width:30,\n        height:30,\n        overflow:'hidden',\n        borderRadius:15,\n        marginRight:7,\n    },\n    itemTopViewText:{\n        height:30,\n        width:100,\n        color:'#333',\n        fontSize:15,\n    },\n    itemImage:{\n        width:screenWidth()-20,\n        height:130,\n    },\n    itemTitle:{\n        color:'black',\n        fontSize:20,\n        textAlign:'center',\n\n    }\n\n})"]}